---
tags:
  - type/guide
  - ai/claude
  - dev/tauri
  - media/live2d
  - project/wendy
  - status/completed
created: 2026-02-07
---

# 웬디 아바타 데스크톱 구축 가이드

## 개요
Live2D 캐릭터 + 음성 대화가 가능한 데스크톱 아바타 프로그램

## 기술 스택
| 항목 | 기술 | 버전 |
|------|------|------|
| 프레임워크 | Tauri | 2.0 |
| 프론트엔드 | React + TypeScript | 19 |
| 빌드 도구 | Vite | 6.4 |
| 캐릭터 렌더링 | pixi.js + pixi-live2d-display | v6 / 0.4 |
| TTS | ElevenLabs API | v3 |
| STT | Web Speech API | - |
| 백엔드 연동 | Clawdbot WebSocket | Protocol v3 |
| 스타일링 | Tailwind CSS | 4 |

## 프로젝트 구조
```
wendy-avatar/
├── src/
│   ├── components/
│   │   ├── Live2DCanvas.tsx    # Live2D 렌더링
│   │   ├── ChatBubble.tsx      # 말풍선 UI
│   │   ├── ChatHistory.tsx     # 대화 히스토리
│   │   └── ChatInput.tsx       # 입력창
│   ├── hooks/
│   │   ├── useLive2D.ts        # Live2D 제어
│   │   ├── useClawdbot.ts      # WebSocket 채팅
│   │   ├── useElevenLabs.ts    # TTS 재생
│   │   └── useSpeechRecognition.ts  # STT
│   ├── lib/
│   │   ├── clawdbot-client.ts  # Gateway 클라이언트
│   │   ├── elevenlabs-tts.ts   # TTS API
│   │   ├── emotion-detector.ts # 감정 분석
│   │   └── tts-text-cleaner.ts # 텍스트 전처리
│   └── App.tsx
├── src-tauri/                   # Rust 백엔드
├── public/
│   └── models/                  # Live2D 모델 파일
├── .env.local                   # 환경변수
└── package.json
```

## 구현된 기능
- ✅ Live2D 캐릭터 렌더링 (투명 창, always on top)
- ✅ Clawdbot WebSocket 실시간 연동
- ✅ ElevenLabs TTS (감정 기반 음성)
- ✅ 립싱크 (오디오 볼륨 분석)
- ✅ 7가지 감정 분석 → 모션 매핑
- ✅ STT 음성 입력
- ✅ 마우스 줌/팬
- ✅ 대시보드 통합

## 설치 및 실행

### 필수 요구사항
- Node.js v24+
- Rust (rustup)
- Visual Studio Build Tools 2022

### 설치
```bash
cd C:\JohnCodeQ\wendy-avatar
npm install
```

### 환경변수 (.env.local)
```env
VITE_CLAWDBOT_URL=ws://localhost:18789
VITE_CLAWDBOT_TOKEN=your-gateway-token
VITE_ELEVENLABS_API_KEY=your-elevenlabs-key
VITE_ELEVENLABS_VOICE_ID=xi3rF0t7dg7uN2M0WUhr
```

### 개발 서버 실행
```bash
# 웹 모드
npm run dev

# Tauri 데스크톱 앱
npm run tauri dev
```

### 프로덕션 빌드
```bash
npm run tauri build
```

## Live2D 모델 설정
1. 모델 파일을 `public/models/` 폴더에 배치
2. `.model3.json` 파일 경로 확인
3. `useLive2D.ts`에서 모델 경로 수정

## WebSocket 프로토콜
Clawdbot Gateway v3 프로토콜 사용:
- `client.id`: 'cli'
- 메시지 타입: text, toolCall, toolResult
- 실시간 스트리밍 지원

## 알려진 이슈
- Tauri dev가 간헐적으로 종료됨 (포트 1420 충돌)
- Web Speech API가 Tauri WebView2에서 불안정

---
*관련: [[웬디 아바타 PWA 구축 가이드]] [[ElevenLabs TTS 설정]]*
